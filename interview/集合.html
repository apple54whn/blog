<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>集合 | Conanan</title>
    <meta name="description" content="apple54whn的文档,conanan的文档">
    <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.2be5de51.css" as="style"><link rel="preload" href="/assets/js/app.d8cb9cb7.js" as="script"><link rel="preload" href="/assets/js/2.3b02efce.js" as="script"><link rel="preload" href="/assets/js/22.ca5f0d41.js" as="script"><link rel="prefetch" href="/assets/js/10.f8026447.js"><link rel="prefetch" href="/assets/js/11.19d3094c.js"><link rel="prefetch" href="/assets/js/12.04fab03d.js"><link rel="prefetch" href="/assets/js/13.96ecc411.js"><link rel="prefetch" href="/assets/js/14.076625fd.js"><link rel="prefetch" href="/assets/js/15.663af154.js"><link rel="prefetch" href="/assets/js/16.8851cfe7.js"><link rel="prefetch" href="/assets/js/17.94a979e8.js"><link rel="prefetch" href="/assets/js/18.923289d1.js"><link rel="prefetch" href="/assets/js/19.95d7a536.js"><link rel="prefetch" href="/assets/js/20.2b3c6974.js"><link rel="prefetch" href="/assets/js/21.661409df.js"><link rel="prefetch" href="/assets/js/23.6de8e3ef.js"><link rel="prefetch" href="/assets/js/24.364196f3.js"><link rel="prefetch" href="/assets/js/3.14089e0c.js"><link rel="prefetch" href="/assets/js/4.0b088ce7.js"><link rel="prefetch" href="/assets/js/5.ecab5bba.js"><link rel="prefetch" href="/assets/js/6.020ec481.js"><link rel="prefetch" href="/assets/js/7.b7b1e947.js"><link rel="prefetch" href="/assets/js/8.d09e1b35.js"><link rel="prefetch" href="/assets/js/9.5ceebd53.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2be5de51.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Conanan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">面试总结</a></div><div class="nav-item"><a href="/Java/" class="nav-link">Java</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/SQL/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/SQL/Oracle/" class="nav-link">Oracle</a></li><li class="dropdown-subitem"><a href="/SQL/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/SQL/Spring Data JPA/" class="nav-link">Spring Data JPA</a></li></ul></li><li class="dropdown-item"><h4>NoSQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/NoSQL/Redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/NoSQL/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/NoSQL/Elasticsearch/" class="nav-link">Elasticsearch</a></li></ul></li></ul></div></div> <a href="https://github.com/apple54whn/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">面试总结</a></div><div class="nav-item"><a href="/Java/" class="nav-link">Java</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/SQL/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/SQL/Oracle/" class="nav-link">Oracle</a></li><li class="dropdown-subitem"><a href="/SQL/MyBatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/SQL/Spring Data JPA/" class="nav-link">Spring Data JPA</a></li></ul></li><li class="dropdown-item"><h4>NoSQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/NoSQL/Redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/NoSQL/MongoDB/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/NoSQL/Elasticsearch/" class="nav-link">Elasticsearch</a></li></ul></li></ul></div></div> <a href="https://github.com/apple54whn/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/interview/" class="sidebar-link">Java 基础</a></li><li><a href="/interview/集合.html" class="active sidebar-link">集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/集合.html#常见的容器" class="sidebar-link">常见的容器</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#list-和-set-异同（没代表性）" class="sidebar-link">List 和 Set 异同（没代表性）</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#arraylist-linkedlist-vector-区别" class="sidebar-link">ArrayList &amp; LinkedList &amp; Vector 区别</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#数组转集合-集合转数组" class="sidebar-link">数组转集合 &amp; 集合转数组</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#hashset-和-hashmap-区别" class="sidebar-link">HashSet 和 HashMap 区别</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#hashmap-的长度为什么是2的幂次方" class="sidebar-link">HashMap 的长度为什么是2的幂次方</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#hashtable-hashmap-区别" class="sidebar-link">Hashtable &amp; HashMap 区别</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#hashtable-和-concurrenthashmap-区别" class="sidebar-link">Hashtable 和 ConcurrentHashMap 区别</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#hashcode-和-equals" class="sidebar-link">Hashcode 和 equals</a></li><li class="sidebar-sub-header"><a href="/interview/集合.html#代码题" class="sidebar-link">代码题</a></li></ul></li><li><a href="/interview/多线程.html" class="sidebar-link">多线程</a></li><li><a href="/interview/SQL.html" class="sidebar-link">数据库</a></li><li><a href="/interview/NoSQL.html" class="sidebar-link">NoSQL</a></li><li><a href="/interview/Java Web.html" class="sidebar-link">Java Web</a></li><li><a href="/interview/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/interview/Tools.html" class="sidebar-link">系统、工具</a></li><li><a href="/interview/项目技术.html" class="sidebar-link">项目技术</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="集合"><a href="#集合" aria-hidden="true" class="header-anchor">#</a> 集合</h1> <h2 id="常见的容器"><a href="#常见的容器" aria-hidden="true" class="header-anchor">#</a> 常见的容器</h2> <ul><li>Collection
<ul><li>List：ArrayList，LinkedList，Vector等</li> <li>Queue：BlockingQueue（接口）</li> <li>Set：HashSet，LinkedHashSet，TreeSet</li></ul></li> <li>Map：HashMap，LinkedHashMap，TreeMap，Properties，Hashtable，ConcurrentHashMap</li></ul> <h2 id="list-和-set-异同（没代表性）"><a href="#list-和-set-异同（没代表性）" aria-hidden="true" class="header-anchor">#</a> List 和 Set 异同（没代表性）</h2> <p>都继承自单列集合顶层接口Collection，都继承了Itrable接口用于遍历</p> <ul><li><p>List：元素<strong>稳定</strong>（sort，遍历出的结果稳定，<strong>且存取顺序一致</strong>）、<strong>可重复</strong></p></li> <li><p>Set：<strong>元素不可重复</strong>。</p> <blockquote><p>元素<strong>不稳定</strong>（unsort，遍历出元素顺序由<strong>该元素HashCode决定</strong>，rehash后不一定一致），若是Linked~则是<strong>稳定</strong>的</p></blockquote></li></ul> <h2 id="arraylist-linkedlist-vector-区别"><a href="#arraylist-linkedlist-vector-区别" aria-hidden="true" class="header-anchor">#</a> ArrayList &amp; LinkedList &amp; Vector 区别</h2> <ul><li><p>ArrayList：底层是<strong>数组</strong>，<strong>支持快速随机访问，增删慢</strong>（或涉及元素移动<code>Arrays.copyOf</code> <code>System.arraycopy</code>），<strong>线程不安全</strong></p> <blockquote><p><strong>初始容量10</strong>，负载因子为<strong>1.0</strong>，扩容增量<strong>0.5</strong></p></blockquote></li> <li><p>LinkedList：底层是<strong>双向链表</strong>，<strong>查找慢，增删快</strong>，<strong>线程不安全</strong>；长度没有限制，占用空间比ArrayList大（维护指针）</p></li> <li><p>Vector：底层是<strong>数组</strong>，<strong>线程安全，性能差</strong>，即使为了线程安全也别用它</p> <blockquote><p><strong>初始容量10</strong>，负载因子为<strong>1.0</strong>，扩容增量<strong>1</strong></p></blockquote> <p>用<code>Collections</code>提供的静态方法**<code>Collection.synchronizedCollection/List/Map/Set)</code>**，甚至使用JUC中类</p></li></ul> <h2 id="数组转集合-集合转数组"><a href="#数组转集合-集合转数组" aria-hidden="true" class="header-anchor">#</a> 数组转集合 &amp; 集合转数组</h2> <ul><li><p>数组转集合。使用<code>Arrays.asList(数组)</code>转换的<strong>不是<code>util</code>包下的<code>ArrayList</code></strong>，是<code>Arrays</code>类的<strong>内部类</strong>。不能修改<strong>长度</strong>！！！</p> <p>所以需要创建新集合，被转换的数组<strong>值也必须是对象</strong>！否则只是将数组整个转为集合（size为1）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> objectList <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList <span class="token punctuation">(</span>数组<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div></li> <li><p>集合转数组，需要指定一个数组</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//必须定义数组，否则下面代码返回的数组泛型丢失！还要指定容量，和集合一样即可</span>
list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//若上面定义的数组容量够用，则直接保存到上面的数组中；否则这行代码有个返回值，即是转换后的数组</span>
</code></pre></div></li></ul> <h2 id="hashset-和-hashmap-区别"><a href="#hashset-和-hashmap-区别" aria-hidden="true" class="header-anchor">#</a> HashSet 和 HashMap 区别</h2> <table><thead><tr><th style="text-align:center;">HashMap</th> <th style="text-align:center;">HashSet</th></tr></thead> <tbody><tr><td style="text-align:center;">实现Map接口的<strong>双列</strong>集合</td> <td style="text-align:center;">实现Set接口的<strong>单列</strong>集合</td></tr> <tr><td style="text-align:center;">底层是数组+链表/红黑树</td> <td style="text-align:center;">底层<strong>基于HashMap</strong>实现的</td></tr> <tr><td style="text-align:center;"><strong>put</strong>添加元素</td> <td style="text-align:center;"><strong>add</strong>添加元素</td></tr> <tr><td style="text-align:center;">作为<strong>键的元素必须重写hashCode和equals</strong>方法</td> <td style="text-align:center;">元素必须重写hashCode和equals方法</td></tr> <tr><td style="text-align:center;">元素的唯一性：先判断<strong>hashCode</strong>，相同再判断<strong>equals</strong>，不同则插入</td> <td style="text-align:center;">同HahsMap</td></tr></tbody></table> <blockquote><p>当链表长度超过阈值（8）时，将链表转换为红黑树，这样大大减少了查找时间</p> <p>&quot;重地&quot;和&quot;&quot;通话&quot;&quot;元素不同，但哈希值相同，<strong>哈希冲突</strong></p></blockquote> <h2 id="hashmap-的长度为什么是2的幂次方"><a href="#hashmap-的长度为什么是2的幂次方" aria-hidden="true" class="header-anchor">#</a> HashMap 的长度为什么是2的幂次方</h2> <p>哈希值范围是<code>-2^31~2^31-1</code>，这么长的数组内存放不下，所以一般先对数组长度求余数，余数即是要存放的数组下标。</p> <p>取余操作中如果<strong>除数是2的幂次</strong>则等价于<strong>与其除数减一的与(&amp;)操作</strong>（ <code>hash%length==hash&amp;(length-1)</code>）</p> <p>采用二进制&amp;操作，相对取余提高运算效率，所以长度是2的幂次方。</p> <h2 id="hashtable-hashmap-区别"><a href="#hashtable-hashmap-区别" aria-hidden="true" class="header-anchor">#</a> Hashtable &amp; HashMap 区别</h2> <ul><li><p>Hashtable：线程安全，效率低，不允许null键和null值；继承自 Dictionary 类，都实现Map接口；有contains方法；</p> <blockquote><p>初始容量</p></blockquote></li> <li><p>HashMap：线程不安全，效率高，允许null键和null值；继承自AbstractMap 类，都实现Map接口；有containsKey/Value方法</p> <blockquote><p>初始容量为16</p></blockquote></li></ul> <h2 id="hashtable-和-concurrenthashmap-区别"><a href="#hashtable-和-concurrenthashmap-区别" aria-hidden="true" class="header-anchor">#</a> Hashtable 和 ConcurrentHashMap 区别</h2> <ul><li>底层<strong>数据结构不同</strong>（Java 8 ）：
<ul><li>Hashtable：数组+链表</li> <li>ConcurrentHashMap：数组+链表/红黑树</li></ul></li> <li><strong>实现线程安全的方式不同</strong>：
<ul><li>Hashtable：<strong>使用 synchronized</strong> 来保证线程安全，即<strong>全表锁</strong>；多线程访问可能会阻塞，效率低下</li> <li>ConcurrentHashMap：
<ul><li>1.7 使用<strong>分段锁</strong>，对<strong>桶数组分段（Segment）</strong>，每把锁只锁这一段数据，多线程访问不同段数据就不会阻塞</li> <li>Java 8 使用 <strong>synchronized 和 CAS</strong> 来操作，<strong>只锁定当前链表或红黑二叉树的首节点</strong>，只要hash不冲突，就不会阻塞</li></ul></li></ul></li></ul> <h2 id="hashcode-和-equals"><a href="#hashcode-和-equals" aria-hidden="true" class="header-anchor">#</a> Hashcode 和 equals</h2> <ul><li><p>equals：默认调用的是 == ，一般根据需要重写。按照约定equals重写应该满足：<strong>自反性</strong>、<strong>对称性</strong>、<strong>传递性</strong>、<strong>一致性</strong></p></li> <li><p>HashCode：返回对象的散列码，十进制整数。</p> <p>一般重写了equals必须重写HashCode。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
    <span class="token keyword">return</span> age <span class="token operator">==</span> student<span class="token punctuation">.</span>age <span class="token operator">&amp;&amp;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> student<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="代码题"><a href="#代码题" aria-hidden="true" class="header-anchor">#</a> 代码题</h2> <p>对<code>HashMap&lt;Integer,User&gt;</code>集合进行排序，按照User中age降序，排序时key，value不能拆散。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> newUsers <span class="token operator">=</span> <span class="token function">sortMap</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newUsers<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//要返回HashMap，所以不能用TreeMap</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">sortMap</span><span class="token punctuation">(</span><span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//不能拆散key，value，所以用Entry</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Colllections只能使用List来排序，所以需要将Set转List</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token class-name">Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//排序，利用Lambda</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o2<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> o1<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//为防止元素由hash值排序不能用HashMap，所以采用LinkedHashMap，存取顺序不变</span>
    <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> newMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//遍历List并存入所以采用LinkedHashMap中</span>
    list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> newMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//LinkedHashMap是HashMap的子类，可以直接返回</span>
    <span class="token keyword">return</span> newMap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/apple54whn/docs/edit/master/docs/interview/集合.md" target="_blank" rel="noopener noreferrer">编辑文档！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新时间: </span> <span class="time">2019-6-2 7:01:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/interview/" class="prev router-link-active">
          Java 基础
        </a></span> <span class="next"><a href="/interview/多线程.html">
          多线程
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d8cb9cb7.js" defer></script><script src="/assets/js/2.3b02efce.js" defer></script><script src="/assets/js/22.ca5f0d41.js" defer></script>
  </body>
</html>
